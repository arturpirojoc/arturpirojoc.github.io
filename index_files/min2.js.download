/*!
 * Amplify Core 1.1.2
 *
 * Copyright 2011 - 2013 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 *
 * http://amplifyjs.com
 */
(function(b,d){var c=[].slice,e={};var a=b.amplify={publish:function(h){if(typeof h!=="string"){throw new Error("You must provide a valid topic to publish.")}var g=c.call(arguments,1),m,l,k,j=0,f;if(!e[h]){return true}m=e[h].slice();for(k=m.length;j<k;j++){l=m[j];f=l.callback.apply(l.context,g);if(f===false){break}}return f!==false},subscribe:function(k,g,p,n){if(typeof k!=="string"){throw new Error("You must provide a valid topic to create a subscription.")}if(arguments.length===3&&typeof p==="number"){n=p;p=g;g=null}if(arguments.length===2){p=g;g=null}n=n||10;var h=0,f=k.split(/\s/),o=f.length,m;for(;h<o;h++){k=f[h];m=false;if(!e[k]){e[k]=[]}var j=e[k].length-1,l={callback:p,context:g,priority:n};for(;j>=0;j--){if(e[k][j].priority<=n){e[k].splice(j+1,0,l);m=true;break}}if(!m){e[k].unshift(l)}}return p},unsubscribe:function(f,h,k){if(typeof f!=="string"){throw new Error("You must provide a valid topic to remove a subscription.")}if(arguments.length===2){k=h;h=null}if(!e[f]){return}var j=e[f].length,g=0;for(;g<j;g++){if(e[f][g].callback===k){if(!h||e[f][g].context===h){e[f].splice(g,1);g--;j--}}}}}}(this));(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(b,c,a){(function(i){var k=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol==="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l};var h=typeof Symbol==="function"&&k(Symbol.iterator)==="symbol"?function(l){return typeof l==="undefined"?"undefined":k(l)}:function(l){return l&&typeof Symbol==="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l==="undefined"?"undefined":k(l)};var f=b("./timeEvent.js");var d=b("uuid/v4");var g=typeof window!=="undefined"?window:i;c.exports=g._purrrf=function j(z){z=z||{};var w;var u;var m;var p;var r;var v;var q;var s;var l={};var t={};var y={};var x=[];var o=null;var n=0;q=function q(A){if(!A){return false}return o=A};s=function s(E,B,D,C,A){if(!o){return false}if(A&&typeof A!=="function"){return false}C=C||{};C.autoIncrement=C.autoIncrement||false;if(A){if(typeof o.on==="undefined"){if(typeof o.addEventListener==="undefined"){return false}o.addEventListener(E,function(){console.log("bound event %s called!",E);A(w(B,D,C))},false)}else{o.on(E,function(){console.log("bound event %s called!",E);A(w(B,D,C))})}}else{return new Promise(function(G,F){if(typeof o.on==="undefined"){if(typeof o.addEventListener==="undefined"){return F(false)}o.addEventListener(E,function(){console.log("bound event %s called!",E);G(w(B,D,C))},false)}else{o.on(E,function(){console.log("bound event %s called!",E);G(w(B,D,C))})}})}};w=function w(C,G,B){B=B||{};B.autoIncrement=B.autoIncrement||false;var F=B.autoIncrement?"_"+(typeof t[C]!=="undefined"?++t[C]:t[C]=0):"";var A=C+F;var D=new f(A,G);l[A]=D;x.push(D);if(typeof y[G]!=="undefined"){var E=y[G];y[G]=A;return p(A,E)}if(typeof G!=="undefined"){y[G]=A}return D.getTime()-n};r=function r(){return n=new f().getTime()};v=function v(){return n};p=function p(A,B){if(typeof l[A]==="undefined"){return false}if(typeof l[B]==="undefined"){return l[A].getTime()-n}return l[A].getTimeDiff(l[B])};m=function m(C){if((typeof C==="undefined"?"undefined":h(C))==="object"&&typeof C.length!=="undefined"){var A=C.length;var D=[];for(var B=0;B<A;B++){if(typeof l[C[B]]==="undefined"){D.push(false)}else{D.push(l[C[B]].getTime())}}return D}if(typeof l[C]==="undefined"){return false}return l[C].getTime()-n};u=function u(A){if(A&&A.ordered){return x}l._config={offset:n};return l};return{_id:d(),push:w,getMap:u,getTime:m,getTimeDiff:p,setStart:r,getStart:v,setEventContext:q,bind:s}}()}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./timeEvent.js":2,"uuid/v4":6}],2:[function(f,g,c){var b=f("uuid/v4");var d=f("performance-now");function a(h,i){this.id=b();this.name=h||"";this.group=i||"";this.time=typeof window!=="undefined"?window.performance.now():d()}a.prototype.getTime=function(){return this.time};a.prototype.getTimeDiff=function(h){if(typeof h==="undefined"){return false}return this.time-h.time};g.exports=a},{"performance-now":3,"uuid/v4":6}],3:[function(b,c,a){(function(d){(function(){var j,k,h,g,i,f;if((typeof performance!=="undefined"&&performance!==null)&&performance.now){c.exports=function(){return performance.now()}}else{if((typeof d!=="undefined"&&d!==null)&&d.hrtime){c.exports=function(){return(j()-i)/1000000};k=d.hrtime;j=function(){var l;l=k();return l[0]*1000000000+l[1]};g=j();f=d.uptime()*1000000000;i=g-f}else{if(Date.now){c.exports=function(){return Date.now()-h};h=Date.now()}else{c.exports=function(){return new Date().getTime()-h};h=new Date().getTime()
}}}}).call(this)}).call(this,b("_process"))},{_process:7}],4:[function(b,f,a){var d=[];for(var c=0;c<256;++c){d[c]=(c+256).toString(16).substr(1)}function g(h,k){var j=k||0;var l=d;return l[h[j++]]+l[h[j++]]+l[h[j++]]+l[h[j++]]+"-"+l[h[j++]]+l[h[j++]]+"-"+l[h[j++]]+l[h[j++]]+"-"+l[h[j++]]+l[h[j++]]+"-"+l[h[j++]]+l[h[j++]]+l[h[j++]]+l[h[j++]]+l[h[j++]]+l[h[j++]]}f.exports=g},{}],5:[function(b,c,a){(function(j){var d;var i=j.crypto||j.msCrypto;if(i&&i.getRandomValues){var h=new Uint8Array(16);d=function f(){i.getRandomValues(h);return h}}if(!d){var g=new Array(16);d=function(){for(var k=0,l;k<16;k++){if((k&3)===0){l=Math.random()*4294967296}g[k]=l>>>((k&3)<<3)&255}return g}}c.exports=d}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],6:[function(c,d,b){var a=c("./lib/rng");var g=c("./lib/bytesToUuid");function f(j,h,n){var k=h&&n||0;if(typeof(j)=="string"){h=j=="binary"?new Array(16):null;j=null}j=j||{};var m=j.random||(j.rng||a)();m[6]=(m[6]&15)|64;m[8]=(m[8]&63)|128;if(h){for(var l=0;l<16;++l){h[k+l]=m[l]}}return h||g(m)}d.exports=f},{"./lib/bytesToUuid":4,"./lib/rng":5}],7:[function(g,a,s){var j=a.exports={};var k;var m;function h(){throw new Error("setTimeout has not been defined")}function q(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){k=setTimeout}else{k=h}}catch(t){k=h}try{if(typeof clearTimeout==="function"){m=clearTimeout}else{m=q}}catch(t){m=q}}());function f(t){if(k===setTimeout){return setTimeout(t,0)}if((k===h||!k)&&setTimeout){k=setTimeout;return setTimeout(t,0)}try{return k(t,0)}catch(u){try{return k.call(null,t,0)}catch(u){return k.call(this,t,0)}}}function d(t){if(m===clearTimeout){return clearTimeout(t)}if((m===q||!m)&&clearTimeout){m=clearTimeout;return clearTimeout(t)}try{return m(t)}catch(u){try{return m.call(null,t)}catch(u){return m.call(this,t)}}}var n=[];var r=false;var i;var o=-1;function l(){if(!r||!i){return}r=false;if(i.length){n=i.concat(n)}else{o=-1}if(n.length){p()}}function p(){if(r){return}var u=f(l);r=true;var t=n.length;while(t){i=n;n=[];while(++o<t){if(i){i[o].run()}}o=-1;t=n.length}i=null;r=false;d(u)}j.nextTick=function(t){var u=new Array(arguments.length-1);if(arguments.length>1){for(var v=1;v<arguments.length;v++){u[v-1]=arguments[v]}}n.push(new b(t,u));if(n.length===1&&!r){f(p)}};function b(t,u){this.fun=t;this.array=u}b.prototype.run=function(){this.fun.apply(null,this.array)};j.title="browser";j.browser=true;j.env={};j.argv=[];j.version="";j.versions={};function c(){}j.on=c;j.addListener=c;j.once=c;j.off=c;j.removeListener=c;j.removeAllListeners=c;j.emit=c;j.binding=function(t){throw new Error("process.binding is not supported")};j.cwd=function(){return"/"};j.chdir=function(t){throw new Error("process.chdir is not supported")};j.umask=function(){return 0}},{}]},{},[1]);(function(d,e){var c;function b(g){var l=g.split("."),j=c,f="";for(var h=0,k=l.length;h<k;h++){f=l[h];j[f]=j[f]||{};j=j[f]}return j}function a(g){var f=BI.env.getDomain(true)||"businessinsider.com";var h=["static1","static2","static3","static4","static5","static6"];return"http://"+h[Math.floor(Math.random()*h.length)]+"."+f+g}c={namespace:b,CDNPath:a};d.BI=d.BI||c;b("abTests");b("post");b("comments");b("authenticated.twitter");b("authenticated.facebook");b("authenticated.linkedin");b("authenticated.googleplus")})(window);(function(c,a,e){c.namespace("cookies");c.cookies={set:d,get:b,clear:f};function d(j,k,h){var g="";if(h){var i=new Date();i.setTime(i.getTime()+(h*60*60*1000));g="; expires="+i.toUTCString()}a.cookie=j+"="+k+g+"; path=/"}function b(g){var i="(?:^|;)(?:[ s]*)(?:"+g+"=)([^;]+)";var j=new RegExp(i);var h=j.exec(a.cookie);return h&&h[1]?h[1]:null}function f(g){if(b(g)){var h=new Date();a.cookie=g+"=0;expires="+h.toUTCString()+";path=/;";return true}}}(BI,document));(function(a,d){var b;a.namespace("iframe");var c=function(f,e){if(e<=5){return}var g=document.getElementById(f);g.height=e+"px";return true};b={expand:c};a.iframe=b;a.expandIframe=a.iframe.expand}(BI));(function(b,f){b.namespace("env");var d;function e(g){d=g;return d}function c(g){if(g){return d.replace(d.split(".")[0]+".","")}return d}function a(){var g=window.location.host;return g.split(".")[0]=="www"||g.split(".")[0]=="stage"||g.indexOf("uk.businessinsider")>-1}b.inProduction=a;b.env={inProduction:a,setDomain:e,getDomain:c}}(BI));(function(b,d){var c;b.namespace("UUID");function a(){var f=new Date().getTime();var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(h){var g=(f+Math.random()*16)%16|0;f=Math.floor(f/16);return(h=="x"?g:(g&7|8)).toString(16)});return e}c={get:a};b.UUID=c}(BI));(function(b,f){var e;var d={};b.namespace("pageData");function g(h,i){d[h]=i}function a(h){return d[h]}function c(h){return d}e={set:g,get:a,getAll:c};b.pageData=e}(BI));(function(a,c){var b;a.namespace("configs.ads");b={};a.configs.ads=b}(BI));(function(){var e;var b=[];var g;var c;var f;var d;var a;g=function(){return b};c=function(h){if(typeof h!=="function"){return false}b.push(h)};f=function(){if(!b.length){return false}b.shift()()};d=function(){if(!b.length){return false}for(var h=0;h<b.length;h++){b[h]()}a()};a=function(){b=[]};e={execute:f,executeAll:d,push:c,list:g};BI.queue=e}());(function(a,d){var c;a.namespace("location");function b(f){f=f.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+f+"=([^&#]*)";var h=new RegExp(e);var g=h.exec(window.location.search);if(g==null){return""}else{return decodeURIComponent(g[1].replace(/\+/g," "))}}c={get:b};a.location.qs=c}(BI));(function(J){var V;var ah;var R;var h;var ag;var N;var b;var m;var M;var E;var A;var f;var w;var z;var D;var ad;var t;var k;var o;var C;var S;var s;var u;var n=1024;var p=".vert-name a";var W=250;var F=W;var I;var c;var T;var d;var j=116;var a=new Date();var Q=100;var B=false;var q=false;var g={};var ae=false;function ac(){if(V.scrollTop()>I*2){q=true}else{q=false}if(V.width()<=n&&!ah.hasClass("condensed")){return}if(V.scrollTop()>=20){if(q&&new Date()-a<Q){return}a=new Date();G()}else{v()}}function G(){if(B||ah.hasClass("condensed")){return}ah.addClass("condensed");$exposedNav.addClass("exposed-nav-hide");R.css("margin-top",j);h.removeClass("open");ag.css("margin-top",c);amplify.publish("masthead-collapsed")}function v(){if(B||!ah.hasClass("condensed")){return}ah.removeClass("condensed");$exposedNav.removeClass("exposed-nav-hide");R.css("margin-top",0);ag.css("margin-top",0);amplify.publish("masthead-expanded")}function af(ai){V=$(window);ah=$(".masthead");R=$(".ad-wallpaper");f=$(".main-nav");o=$(".masthead-dropdown");C=f.find(".item");S=f.find("li");h=$(".user-login.dropdown");ag=$("[data-ad-tout]");N=$(".links").find(".social");m=$("[data-search-icon-close]");A=$("[data-search-input]");s=$("[data-hamburger]");w=$("[data-nav-over]");z=w.find(".nav-sections li");D=w.find(".nav-verticals a");ad=$(".nav-sections .active");t=ad&&y(ad);k=t.length&&t.find(".active");M=$("[data-search-over]");E=M.find(".search");$exposedNav=$(".exposed-nav-show");ai()}function y(ai){var aj=ai.find("a");var ak=aj&&aj.data("dropdown-id");return t=ak&&$("[data-id='"+ak+"']")||$()}function P(aj,ak){var ai=$(aj);ai.attr("src",ai.attr("data-src"));g[ak]=true}function l(ak){var an=ak.data;var ai;var aj;var al;ad=$(this);t=y(ad);if(t.length===0){var am=ad[0].innerText;if(typeof g[am]==="undefined"){console.log("post loading...");aj=ad.parents(".nav-verticals").siblings(".stories-container");al=aj.find('div[data-id="'+am+'"').find("img");al.each(function(){P(this,am)})}}else{H(t)}t.length&&L(t);k=t.length&&t.find(".active");$(an).removeClass("active");ad.addClass("active");ai=t.length&&!k.length&&t.find("li:first-child > a");ai.length&&ai.addClass("active");if(k.length){r(k.data("index"))}else{if(ai.length){r(ai.data("index"))}else{r(ad.data("index"))}}return false}function Y(){V.scroll(ac);D.on("tap",function(ai){if(!$(this).hasClass("active")){ai.preventDefault();$(this).trigger("mouseenter")}});b.on("click",function(){e(M,w);w.removeClass("exposed-nav-show");U(this,m);s.find(".hamburger").removeClass("open");A.focus();return false});m.on("click",function(){M.removeClass("nav-show");w.addClass("exposed-nav-show");U(this,b);return false});s.on("click",function(){if(!ae){$(".main-nav-dropdown").find(".stories-container").find("img").each(function(){P(this)});ae=true}$(this).find(".hamburger").toggleClass("open");e(w,M);r(k.data("index"));U(m,b);return false});z.on("hover",z,l);D.on("hover",D,l);$("#main-content").click(function(){x()});$(document).on("keyup",function(ai){if(ai.keyCode==27){x()}})}function x(){M.removeClass("nav-show");U(m,b);w.removeClass("nav-show");s.find(".hamburger").removeClass("open")}function O(){L(t)}function L(ai){$(".subsection").hide();r(0);ai.show()}function r(ai){$(".stories-container > div").css("margin-left","-"+ai+"00%")}function e(aj,ai){if(aj.hasClass("nav-show")){aj.removeClass("nav-show");ah.removeClass("overlay-is-open")}else{aj.addClass("nav-show");ai.removeClass("nav-show");ah.addClass("overlay-is-open")}}function U(aj,ai){$(aj).addClass("display-none");$(ai).removeClass("display-none")}function i(){I=ah.outerHeight();if(ah.hasClass("redesign")){c=47}else{c=65}ah.addClass("condensed");T=ah.outerHeight()+Number(ah.css("top").replace("px",""));ah.removeClass("condensed");d=I-T;J.masthead.height=d}function Z(){amplify.subscribe("headerContentAddition",function(ai){I+=$(ai).height();d=I-T;J.masthead.height=d;ac()});amplify.subscribe("headerContentRemoval",function(ai){I-=$(ai).height();d=I-T;J.masthead.height=d;ac()});amplify.subscribe("interstitialAdShown",function(){G();
B=true});amplify.subscribe("interstitialAdHidden",function(){B=false;v()})}function H(ak){var al=ak.find(".stories-container");var ai=al.find(".sub-vertical-container.active");var aj;if(!ai.length){ai=al.find(".sub-vertical-container").eq(0)}else{}aj=ai.find("img");aj.each(function(){P(this)});return ak}function ab(ak){var ai=$(ak);var aj=$(p).text();ai.find('a[data-id="'+aj+'"]').each(function(am,an){var al=$(an);al.addClass("active");al.parents(".nav-verticals").siblings(".stories-container").find('div[data-id="'+aj+'"]').addClass("active")});return ai}function K(ai){$.ajax({url:"/ajax/navbar",success:function(ak){u=$(".main-nav-dropdown");var aj=$(ak);aj=ab(ak);u.html(H(aj));ai()}})}function aa(ai){b=$("[data-search-icon-open]");if(!b.length){setTimeout(aa,1000);return}K(function(){af(function(){Y();i();Z();O();s.show();b.removeClass("display-none")})})}function X(){J.masthead={height:undefined};aa()}$(X)}(BI));(function(){if(!Array.prototype.forEach){Array.prototype.forEach=function(d,c){for(var b=0,a=this.length;b<a;++b){d.call(c,this[b],b,this)}}}}());var IASPET_TIMEOUT=500;var googletag=googletag||{};googletag.cmd=googletag.cmd||[];var initAdServer=function(){if(__iasPET.initAdServerSet){return}var a=document.createElement("script");a.async=true;a.type="text/javascript";var c="https:"==document.location.protocol;a.src=(c?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);__iasPET.initAdServerSet=true};setTimeout(initAdServer,IASPET_TIMEOUT);var iasData,iasDataHandler,__iasPET=__iasPET||{};__iasPET.queue=__iasPET.queue||[];(function(){var b=document.createElement("script");b.async=true;b.src="//cdn.adsafeprotected.com/iasPET.1.js";var a=document.getElementsByTagName("head")[0];a.insertBefore(b,a.firstChild)})();iasDataHandler=function(a){initAdServer()};__iasPET.pubId="5046";(function(d,g){var f=d.jQuery||d.Cowboy||(d.Cowboy={}),e;f.throttle=e=function(m,l,a,b){var c,n=0;if(typeof l!=="boolean"){b=a;a=l;l=g}function k(){var p=this,h=+new Date()-n,q=arguments;function i(){n=+new Date();a.apply(p,q)}function j(){c=g}if(b&&!c){i()}c&&clearTimeout(c);if(b===g&&h>m){i()}else{if(l!==true){c=setTimeout(b?j:i,b===g?m-h:m)}}}if(f.guid){k.guid=a.guid=a.guid||f.guid++}return k};f.debounce=function(c,b,a){return a===g?e(c,b,false):e(c,a,b!==false)}})(this);var _PIANO={init:function(){BI.pianoEnabled=true;tp=window.tp||[];_PIANO.pianoCookie();tp.push(["addHandler","meterActive",function(a){if(a.viewsLeft===0){BI.cookies.set("__tlo","true",2592000)}else{BI.cookies.set("__tlo","false",2592000)}}]);_PIANO.loginFromMasthead();_PIANO.logoutFromMasthead();_PIANO.toggleLoginView();tp.push(["addHandler","checkoutComplete",function(a){dataLayer.push({event:"PianoTemplate",eventCategory:"Piano",eventAction:"Purchase",eventLabel:"Complete",conversionObject:a})}])},login:function(){tp.push(["init",function(){if(tp.user.isUserValid()){$(".piano-login").html("Sign Out").click(function(){_PIANO.logout()})}else{$(".piano-login").html("Sign In").click(function(){tp.user.showLogin({loginSuccess:function(){var a=BI.cookies.get("__pref");if(typeof a!=="undefined"&&a!==""){window.location.assign(a)}else{window.location.assign("http://businessinsider.com/")}}})})}}])},loginMobile:function(){tp.push(["init",function(){if(tp.user.isUserValid()){$("#piano-login").html("Sign Out of BI Prime").click(function(){_PIANO.logout()})}else{$("#piano-login").html("Sign In to BI Prime").click(function(){tp.user.showLogin({loginSuccess:function(){location.reload()}})})}}])},logout:function(){tp.user.logout();location.reload()},pianoCookie:function(){function a(e){var g=e+"=";var d=document.cookie.split(";");for(var f=0;f<d.length;f++){var h=d[f];while(h.charAt(0)==" "){h=h.substring(1,h.length)}if(h.indexOf(g)==0){return h.substring(g.length,h.length)}}return null}var b=a("__tac");BI.piano=false;if(b&&b!==""){BI.piano=true}},checkAccess:function(){BI.access=false;tp.push(["addHandler","experienceExecute",function(c){var b="RIR4ERE";if((typeof c.accessList!="undefined")&&(c.accessList.length>0)){for(var a in c.accessList){if(c.accessList[a].rid===b){console.log("User has access",c.accessList);return BI.access=true}}}else{console.log("User does not have access")}}])},checkOut:function(){tp.push(["addHandler","checkoutComplete",function(a){console.log("checkoutComplete",a);BI.piano=true}])},checkOutClose:function(){tp.push(["addHandler","checkoutClose",function(a){switch(a.state){case"checkoutCompleted":var b=BI.cookies.get("__pref");if(typeof b!=="undefined"&&b!==""){window.location.assign(b)}else{window.location.assign("http://businessinsider.com/")}break;case"alreadyHasAccess":console.log("alreadyHasAccess");BI.piano=true;break;case"close":console.log("No action taken, user just closed the portal");break}}])},hideAdContainers:function(){},error:function(){tp.push(["addHandler","checkoutError",function(a){console.log("Error: "+a.message)}])},loginFromMasthead:function(){var a=$("[data-masthead-dropdown-bi-prime-login]");if(!a.length){setTimeout(_PIANO.loginFromMasthead,1000);return}a.on("click",function(b){b.preventDefault();if(!BI.piano){tp.user.showLogin({loginSuccess:function(){location.reload()}})}})},logoutFromMasthead:function(){var a=$("[data-masthead-dropdown-bi-prime-logout]");if(!a.length){setTimeout(_PIANO.logoutFromMasthead,1000);return}a.on("click",function(b){b.preventDefault();_PIANO.logout()})},toggleLoginView:function(){var c=$("[data-masthead-dropdown-bi-prime-logout]");var b=$("[data-masthead-username]");var a=$("[data-masthead-dropdown-bi-prime-container]");if(!c.length&&!a.length){setTimeout(_PIANO.toggleLoginView,1000);return}if(!BI.piano){c.addClass("bi-prime-logout-is-hidden")}if(BI.piano){b.text("Account");a.addClass("masthead-dropdown-bi-prime-container--prime-enabled")}}};_PIANO.init();BI.doubleclick=(function(b,p,k){var c=4442842;var i;var l=[];var q={};var f=150;const j=["utm_campaign","utm_source","utm_medium","utm_term","utm_content"];p.namespace("DFP");function g(t){var r=t.offsetLeft;var u=t.offsetTop;var s;s=t.offsetParent;while(s){r+=s.offsetLeft;u+=s.offsetTop;t=s;s=t.offsetParent}return{x:r,y:u}}function o(s){var t;var r=".ad.dfp";if(typeof s==="string"){r+=s}t=document.querySelectorAll(r);t.forEach=Array.prototype.forEach;return t}function h(){l.forEach(function(s){if((k.pageYOffset+k.innerHeight-f)>s.top){var r=$(s.element);if(typeof q[r.attr("data-region")]!=="undefined"){return}q[r.attr("data-region")]=true;p.DFP.renderAd(s.element)}})}function d(){$(k).scroll($.throttle(50,h));h()}function n(){o(".lazyload:not(.rendered)").forEach(function(r){m(r)});o(".position-load").forEach(function(r){l.push({element:r,top:$(r).offset().top})});d()}function m(x,C,s){var u=k.innerWidth||document.body.clientWidth;var F=k.innerHeight||document.body.clientHeight;if(u===620&&F===460){$("[data-ad-container]").hide();return}var E;var t;var B=!!x.getAttribute("data-companion-ad");var G;var D=x.getAttribute("data-region");if(typeof p.ads==="undefined"){p.ads={slots:[],queue:[]}}var A=false;if(typeof p.ads.slots[D]!=="undefined"){var z=p.ads.slots[D].length;if(typeof p.ads.slots[D][z-1]["_id"]!=="undefined"){t=p.ads.slots[D][z-1]["_id"]}else{t="ad-"+p.UUID.get();A=true;p.ads.slots[D][z-1]["_id"]=t}}else{t="ad-"+p.UUID.get();A=true;p.ads.slots[D]=[];p.ads.slots[D].push({_id:t})}x.setAttribute("id",t);var v=k._purrrf.push("renderAd_"+t,"adChain_"+t);var r=function(){if(v<10000){p.analytics.gaEventTrack({eventCategory:"adChain",eventAction:"renderAd",eventLabel:D,eventValue:v,event:"adTimingEvent"})}};if(typeof p.analytics==="undefined"){p.queue.push(r)}else{r()}G=x.getAttribute("data-sizes").split(",");if($("body").hasClass("wallpapered")){var y=true}else{var y=false}if(y===true&&D==="Desktop In Post Ad"){G=G.slice(0,3)}var u=k.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(D==="Slideshow One Page Ad Desktop"){if(y===true){G.splice(0,2)}else{if(document.getElementById("right-rail")&&(u<1240)){G.splice(0,2)}else{if(document.getElementById("right-rail")){G.shift();G.pop()}else{if(u>=1240){G.splice(G.length-2)}}}}}G.forEach(function(I,H){G[H]=I.split("x");G[H].forEach(function(J,K){if(isNaN(parseInt(J,10))){G[H]=J}else{G[H][K]=parseInt(J,10)}})});var w="/"+c+"/"+x.getAttribute("data-adunit");if(typeof BI_adHierarchy!=="undefined"){__iasPET.queue.push({adSlots:{adUnitPath:BI_adHierarchy,size:G[0],adSlotId:t},dataHandler:iasDataHandler})}googletag.cmd.push(function(){E=googletag.defineSlot(w,G,t);if(typeof __iasPET.setTargetingForGPT==="function"){__iasPET.setTargetingForGPT()}if(x.hasAttribute("data-responsive")&&y===false){var H=JSON.parse(x.getAttribute("data-responsive"));if(H){E.defineSizeMapping(H)}}if(B===true){E.addService(googletag.companionAds()).addService(googletag.pubads());googletag.companionAds().setRefreshUnfilledSlots(true);googletag.enableServices();console.log("DFP: companion ad code enabled")}else{E.addService(googletag.pubads());googletag.enableServices()}if(C!==undefined){E.setCollapseEmptyDiv(C)}else{E.setCollapseEmptyDiv(true)}if(typeof Krux!=="undefined"){googletag.pubads().setTargeting("kuid",Krux.user);googletag.pubads().setTargeting("ksg",Krux.segments)}p.DFP.adRegions[x.getAttribute("data-region")]=E});googletag.cmd.push(function(){function H(J){var I;if(I=x.getAttribute("data-"+J)){E.setTargeting(J,I)}}H("adunit");H("authors");H("pagetype");H("pos");H("region");H("sizes");H("sr");H("tag");H("url");H("views");if(s){s(E)}});googletag.cmd.push(function(){j.forEach(function(H){if(typeof p.location==="undefined"||typeof p.location.qs==="undefined"){return}var I=p.location.qs.get(H);if(I){E.setTargeting(H,I)}})});if(typeof p.ads!=="undefined"&&p.ads.apstag_bids){if(A){if(typeof apstag!=="undefined"){console.log("needs bid",D,t);apstag.fetchBids({slots:[{slotID:t,slotName:w,sizes:G}],timeout:500},function(H){googletag.cmd.push(function(){console.log("got bid",D,t);
apstag.setDisplayBids([t]);googletag.display(t)})})}else{googletag.cmd.push(function(){console.log("needs bid but apstag undefined - display without bid now",D,t);googletag.display(t)})}}else{googletag.cmd.push(function(){if(typeof apstag!=="undefined"){console.log("doesnt need bid, setDisplayBids now and display",D,t);apstag.setDisplayBids([t])}googletag.display(t)})}}else{if(typeof apstag==="undefined"){googletag.cmd.push(function(){googletag.display(t)});return}p.ads.queue.push({id:t,slot:E});setTimeout(function(){p.ads.queue.forEach(function(H){googletag.cmd.push(function(){apstag.setDisplayBids([H.id]);googletag.display(H.id)})});p.ads.queue=[]},500)}p.ads.slots[D].push({});x.classList.add("rendered");var D=x.getAttribute("data-region");b.publish("adRendered",D)}function e(s,r){return(" "+s.className+" ").indexOf(" "+r+" ")>-1}function a(){o(":not(.rendered):not(.lazyload):not(.position-load)").forEach(function(r){m(r)})}b.subscribe("adRender",a);b.subscribe("adRenderLazyLoad",n);document.addEventListener("DOMContentLoaded",n);p.DFP={adRegions:{},loaded:false,renderAd:m};k.googletag=k.googletag||{cmd:[]};googletag.cmd.push(function(){googletag.pubads().enableAsyncRendering();googletag.pubads().enableVideoAds();googletag.companionAds().setRefreshUnfilledSlots(true);googletag.enableServices();p.DFP.loaded=true;b.publish("dfpLoaded");googletag.pubads().addEventListener("slotRenderEnded",function(u){var r=u.slot&&u.slot.getSlotElementId();var y=u.slot&&u.slot.getTargetingMap().region[0];var x=k._purrrf.push("slotRenderEnded_"+r,"adChain_"+r);var v=function(){if(x<30000){p.analytics.gaEventTrack({eventCategory:"adChain",eventAction:"renderAd_slotRenderEnded",eventLabel:y,eventValue:x,event:"adTimingEvent"})}};if(typeof p.analytics==="undefined"){p.queue.push(v)}else{v()}var t=u.size[0]+"x"+u.size[1];var w=t.split("x");var s=$("[data-region='"+y+"']");if(y==="Desktop In Post Ad"&&t==="300x250"){s.addClass("ad-float-left")}if(y==="Desktop In Post Ad"){s.find("div:first-child").width(w[0]).height(w[1]);s.find("div:first-child iframe").width(w[0]).height(w[1])}if(w[0]==="1"){s.closest(".right-ad").remove();s.remove()}if(y==="Mobile River Top"||y==="Slideshow One Page Ad Mobile"){s.last().find("div:first-child iframe").width(w[0]).height(w[1])}});googletag.pubads().addEventListener("slotOnload",function(s){var r=s.slot&&s.slot.getSlotElementId();var w=s.slot&&s.slot.getTargetingMap().region[0];var v=k._purrrf.push("slotOnload_"+r,"adChain_"+r);var u=k._purrrf.getTimeDiff("slotOnload_"+r,"renderAd_"+r);var t=function(){if(v<30000){p.analytics.gaEventTrack({eventCategory:"adChain",eventAction:"slotRenderEnded_slotOnload",eventLabel:w,eventValue:v,event:"adTimingEvent"})}if(u<60000){p.analytics.gaEventTrack({eventCategory:"adChain",eventAction:"totalAdLoad",eventLabel:w,eventValue:u,event:"adTimingEvent"})}};if(typeof p.analytics==="undefined"){p.queue.push(t)}else{t()}})})});function getCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}BI.doubleclick(amplify,BI,window);(function(){function a(){var c=document.getElementById("breaking-module-rendered");document.getElementById("breaking-module-siteskin").innerHTML=c.innerHTML;c.parentNode.removeChild(c);document.body.className=document.body.classList.remove("responsive")}function b(){setTimeout(a,0)}BI.addSiteSkinBorder=b;document.addEventListener("DOMContentLoaded",function(){if(document.querySelector('.ad[data-region="Skin"]')!==null){document.body.classList.remove("responsive")}})}());(function(e,g,c){var b,a,h;function k(){b={postBottomWide:{US:{id:2215,height:300,selector:".footer-ad .dianomi-ad"},UK:{id:2215,height:300,selector:".footer-ad .dianomi-ad"}},postBottomNarrow:{US:{id:2212,height:237,selector:".footer-ad .dianomi-ad"},UK:{id:1916,height:237,selector:".footer-ad .dianomi-ad"}},postRightRail:{US:{id:2211,height:450,selector:".right-ad .dianomi-ad"},UK:{id:1913,height:450,selector:".right-ad .dianomi-ad"}},homeRightRail:{US:{id:1912,height:450,selector:".right-ad .dianomi-ad"},UK:{id:1914,height:450,selector:".right-ad .dianomi-ad"}}}}function l(m){if(m){a="postRightRail"}else{a="homeRightRail"}}function d(m){i(m.selector,m.id,m.height)}function j(o,m){var n;k();if(!o){return}if(m===c){m=a}n=m.indexOf("postBottom")>-1;if(n){if(e(window).width()<=1240){m=m+"Narrow";d(b[m][o])}else{m=m+"Wide";d(b[m][o])}}else{d(b[m][o])}}function i(n,o,m){e(n).html('<iframe width="100%" height="'+m+'" marginheight=0 marginwidth=0 frameborder=0 vspace=0 hspace=0 scrolling=NO  src="//www.dianomi.com/smartads.epl?id='+o+"&url="+escape(document.location.href)+'"></iframe>')}var f={init:j,setConfigKey:l};g.dianomi=f}(jQuery,BI));(function(d){amplify.subscribe("contentloaded-countdownclock",function(i){d.countdownTimer.end=i.end;d.countdownTimer.onFinish=i.onFinish;if(i.isTicking){d.countdownTimer.start()}else{d.countdownTimer.blink()}});var g='<span class="colon"><span>:</span></span>';var f;var e;var c;var a=function(l){var k="";var m;l=""+l;for(var j=0;j<l.length;j++){m=l.charAt(j);if(m>="0"&&m<="9"){k+='<span class="digit-'+m+'"><span>'+m+"</span></span>"}}return'<span class="digits">'+k+"</span>"};function b(i){if(i=="hide"){f.className=f.className+" hide"}else{if(i=="blink"){c=document.getElementById("countdownLive");c.className="live";c.setAttribute("data-bi-countdown-effect","blink");e.className="hide"}}}function h(){var l=d.countdownTimer.end-Math.floor(new Date().getTime()/1000);if(e==null){e=document.getElementById("countdownTimer")}if(f==null){f=document.getElementById("countdown")}if(l<=-3600||(d.countdownTimer.onFinish=="hide"&&l<=0)){b("hide")}else{if(l<=0){b("blink")}}amplify.publish("countdown-tick");var k=l%60;k=k<10?"0"+k:k;var j=Math.floor(l/60)%60;j=j<10?"0"+j:j;var i=Math.floor(l/3600);var m=g+a(k);if(l>=60){m=a(j)+m}if(l>=3600){m=a(i)+g+m}e.innerHTML=m;setTimeout(h,500)}d.countdownTimer={end:0,onFinish:"blink",start:h,finish:b}}(BI));